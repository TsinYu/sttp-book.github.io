
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Design-by-contracts and property-based testing Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../pragmatic-testing/" />
    
    
    <link rel="prev" href="model-based-testing.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../preface/authors.html">
            
                <a href="../preface/authors.html">
            
                    
                    Authors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../preface/acknowledgments.html">
            
                <a href="../preface/acknowledgments.html">
            
                    
                    Acknowledgments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../preface/adopt.html">
            
                <a href="../preface/adopt.html">
            
                    
                    Adopt this book
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../preface/contribute.html">
            
                <a href="../preface/contribute.html">
            
                    
                    Contribute to this book
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../preface/license.html">
            
                <a href="../preface/license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../getting-started/">
            
                <a href="../getting-started/">
            
                    
                    Getting started with software testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../getting-started/why-software-testing.html">
            
                <a href="../getting-started/why-software-testing.html">
            
                    
                    Why software testing?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../getting-started/testing-principles.html">
            
                <a href="../getting-started/testing-principles.html">
            
                    
                    Principles of software testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../getting-started/test-automation.html">
            
                <a href="../getting-started/test-automation.html">
            
                    
                    Software testing automation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="./">
            
                <a href="./">
            
                    
                    Testing techniques
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="specification-based-testing.html">
            
                <a href="specification-based-testing.html">
            
                    
                    Specification-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="boundary-testing.html">
            
                <a href="boundary-testing.html">
            
                    
                    Boundary testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="structural-testing.html">
            
                <a href="structural-testing.html">
            
                    
                    Structural-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="model-based-testing.html">
            
                <a href="model-based-testing.html">
            
                    
                    Model-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.1.5" data-path="design-by-contracts.html">
            
                <a href="design-by-contracts.html">
            
                    
                    Design-by-contracts and property-based testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../pragmatic-testing/">
            
                <a href="../pragmatic-testing/">
            
                    
                    Pragmatic software testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../pragmatic-testing/testing-pyramid.html">
            
                <a href="../pragmatic-testing/testing-pyramid.html">
            
                    
                    The testing pyramid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../pragmatic-testing/mocking.html">
            
                <a href="../pragmatic-testing/mocking.html">
            
                    
                    Mock objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../pragmatic-testing/design-for-testability.html">
            
                <a href="../pragmatic-testing/design-for-testability.html">
            
                    
                    Design for testability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../pragmatic-testing/tdd.html">
            
                <a href="../pragmatic-testing/tdd.html">
            
                    
                    Test-driven development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="../pragmatic-testing/test-code-quality.html">
            
                <a href="../pragmatic-testing/test-code-quality.html">
            
                    
                    Test code quality
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../intelligent-testing/">
            
                <a href="../intelligent-testing/">
            
                    
                    Intelligent testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../intelligent-testing/mutation-testing.html">
            
                <a href="../intelligent-testing/mutation-testing.html">
            
                    
                    Mutation testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../intelligent-testing/fuzzing.html">
            
                <a href="../intelligent-testing/fuzzing.html">
            
                    
                    Fuzzing testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" >
            
                <span>
            
                    
                    Search-based software testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../testing-into-context/">
            
                <a href="../testing-into-context/">
            
                    
                    Testing in the context
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" >
            
                <span>
            
                    
                    Web testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" >
            
                <span>
            
                    
                    Database testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" >
            
                <span>
            
                    
                    Mobile testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" >
            
                <span>
            
                    
                    Continuous experimentation (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.5" >
            
                <span>
            
                    
                    Embedded software testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../non-functional-testing/README.md">
            
                <span>
            
                    
                    Non-functional testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" >
            
                <span>
            
                    
                    Security testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" >
            
                <span>
            
                    
                    Performance testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" >
            
                <span>
            
                    
                    Ethical testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="8.1" >
            
                <span>
            
                    
                    Appendix
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="../appendix/answers.html">
            
                <a href="../appendix/answers.html">
            
                    
                    Answers to the exercises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="../appendix/changelog.html">
            
                <a href="../appendix/changelog.html">
            
                    
                    Change log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Design-by-contracts and property-based testing</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="design-by-contracts-and-property-based-testing">Design by Contracts and Property-Based Testing</h1>
<p>Can the production code test itself?
In this chapter, we&apos;ll discuss what design by contracts and
property-based testing are.</p>
<h2 id="self-testing">Self Testing</h2>
<p>A self testing system is, in principle, a system that tests itself.
This may sound a bit weird. Let&apos;s take a step back first.</p>
<p>The way we tested systems so far was by creating separate classes for the tests.
The production code and test code were completely separated.
The test suite (consisting of the test classes) exercises and then observes the system under test to check whether it is acting correctly.
If the system does something that is not expected by the test suite, the test suite fails.
The code in the test suite is completely redundant.
It does not add any behavior to the system.</p>
<p>With self-testing, we &quot;move&quot; a bit of the test suite into the system itself.
These assertions we insert into production code allows the system to check if it is running correctly by itself.
We do not have to run the test suite, but instead the system can check (part of) its behavior during the normal execution of the system.
Like with the test suite, if anything is not acting as expected, an error will be thrown.
In software testing the self-tests are used as an additional check in the system additional to the test suite.</p>
<h3 id="assertions">Assertions</h3>
<p>The simplest form of this self-testing is the <em>assertion</em>.
An assertion is a boolean expression at a specific point in a program
which will be true unless there is a bug in the program.
In other words,
an assertion basically says that a certain condition has to be true 
at the time the assertion is executed.</p>
<p>In Java, to make an assertion we use the <code>assert</code> keyword:</p>
<pre><code class="lang-java"><span class="hljs-keyword">assert</span> &lt;condition&gt; : <span class="hljs-string">&quot;&lt;message&gt;&quot;</span>;
</code></pre>
<p>The <code>assert</code> keywords checks if the <code>&lt;condition&gt;</code> is true.
If it is, nothing happens.
The program just continues its execution as everything is according to plan.
However, if the <code>&lt;condition&gt;</code> yields false, the <code>assert</code> throws an <code>AssertionError</code>.</p>
<p>We have implemented a class representing a stack, we just show the <code>pop</code> method:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyStack</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> Element <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">count</span><span class="hljs-params">()</span> &gt; 0 : &quot; The stack does not have any elements to pop.&quot;

    <span class="hljs-comment">// ... actual method body ...</span>

    <span class="hljs-keyword">assert</span> <span class="hljs-title">count</span><span class="hljs-params">()</span> </span>== oldCount - <span class="hljs-number">1</span>;
  }
}
</code></pre>
<p>In this method, we check if a condition holds at the start: the stack should have at least one element.
Then, after the actual method we check whether the count is now one lower than before popping.</p>
<p>These conditions are also known as pre- and postconditions.
We cover these in the following section.</p>
<p><em>Note</em>: The assertion&apos;s message is optional, but can be very helpful 
for debugging.
Always include a message that describes what is going wrong if the assertion is failing.</p>
<p>In Java, asserts can be enabled or disabled.
If the asserts are disabled, they will never throw an <code>AssertionError</code> even if their conditions are false.
Java&apos;s default configuration is to disable the assertions.</p>
<p>To enable the asserts we have to run Java with a special argument in one of these two ways: <code>java -enableassertions</code> or <code>java -ea</code>.
When using Maven or IntelliJ, the assertions are enabled automatically when running tests.
With Eclipse or Gradle, we have to enable it ourselves.</p>
<p>When running the system with assertions enabled, 
we increase the fault sensitivity of the system, i.e., the system
becomes more sensible to faults.
This might seem undesirable, but when executing tests, 
we want the tests to fail.
After all, if a test fail, we just found another fault in the system that we can then fix before deploying it to final users.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Tnm0qwsEiyU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<p>Note how assertions play the role of test oracles here, but in a slightly
different way. Just to remember, oracles inform us
whether the software behaved correctly.</p>
<p>So far, we only used &quot;value comparison&quot; as oracle. Given an input that
we devised, we knew what output to expect. For example, in a program that
returns the square root of a number, given n=4, the value we expect as output
is 2.
Instead of focusing on a specific instances, like we did so far, property checks, like the ones we are going to see in the remaining of this chapter, are more general rules (properties) that we assert on our code. For example, a program that, given <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span>, returns <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord mathrm mtight">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>, has a property that it should never return a negative number.</p>
<p>Assertions also serve as an extra safety measure.
If it is crucial that a system runs correctly, we can use the asserts to add some additional testing during the system&apos;s execution.</p>
<p>However, we note that assertions do not replace unit tests.
Assertions are often of a more general nature.
We still need the specific cases in the unit tests. A combination of
both is what we desire.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OD0BY8GQs9M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<h2 id="pre--and-postconditions">Pre- and Postconditions</h2>
<p>We briefly mentioned pre- and postcondition in an example.
Now it is time to formalize the idea and see how to create good pre- and postconditions and their influence on the code that we are writing.</p>
<p>Tony Hoare pioneered reasoning about programs with assertions.
He proposed the now so-called <strong>Hoare Triples</strong>.
A Hoare Triple consists of a set of preconditions <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>P</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{ P \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mclose">}</span></span></span></span>, a program <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span> and a set of postconditions <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>Q</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{ Q \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit">Q</span><span class="mclose">}</span></span></span></span>
We can express the Hoare Triple as follows: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>P</mi><mo>}</mo><mtext>&#xA0;</mtext><mi>A</mi><mtext>&#xA0;</mtext><mo>{</mo><mi>Q</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{ P \}\ A\ \{ Q \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mclose">}</span><span class="mord mathit"><span class="mspace">&#xA0;</span><span class="mord mathit">A</span></span><span class="mopen"><span class="mspace">&#xA0;</span><span class="mopen">{</span></span><span class="mord mathit">Q</span><span class="mclose">}</span></span></span></span>.
This can be read as: if we know that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span> holds, and we execute <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span>, then, we end up in a state where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span></span></span></span> holds.
If there are no preconditions, i.e., no assumptions needed for the execution of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span>, we can simply set <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span> to true.</p>
<p>In a Hoare Triple, the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span> can be a single statement or a whole program.
We look at <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span> as a method.
Then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span></span></span></span> are the pre- and postcondition of the method <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span> respectively.
Now we can write the Hoare Triple as: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>p</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>}</mo><mtext>&#xA0;</mtext><mi>m</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>d</mi><mtext>&#xA0;</mtext><mo>{</mo><mi>p</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{ preconditions \}\ method\ \{ postconditions \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mclose">}</span><span class="mord mathit"><span class="mspace">&#xA0;</span><span class="mord mathit">m</span></span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mopen"><span class="mspace">&#xA0;</span><span class="mopen">{</span></span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mclose">}</span></span></span></span>.</p>
<h3 id="preconditions">Preconditions</h3>
<p>When writing a method, each condition that needs to hold for the method to successfully execute can be a pre-condition.
These pre-conditions can be turned into assertions.</p>
<p>Suppose a class that keeps track of our favorite books.
Let&apos;s define some pre-conditions for the merge method.</p>
<p>The method adds the given books to the list of favorite books and then sends some notification to, e.g., a phone.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  List&lt;Book&gt; favorites;

  <span class="hljs-comment">// ...</span>

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    favorites.addAll(books);
    pushNotification.booksAdded(books);
  }
}
</code></pre>
<p>When creating pre-conditions, we have to think about what needs to hold to let the method execute.
We can focus on the parameter <code>books</code> first.
This cannot be <code>null</code>, because then the <code>addAll</code> method will throw a <code>NullPointerException</code>.
It should also not be empty, because then we cannot add any books.
Finally, adding books that we already have does not make sense, so the <code>books</code> should not all be present in the <code>favorites</code> already.</p>
<p>Now we can take a look at the <code>favorites</code>.
This also cannot be <code>null</code> because then we cannot call <code>addAll</code> on favorites.</p>
<p>This gives us 4 pre-conditions and, thus, 4 assertions in the method:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  <span class="hljs-comment">// ...</span>

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    <span class="hljs-keyword">assert</span> books != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> favorites != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> !books.isEmpty();
    <span class="hljs-keyword">assert</span> !favorites.containsAll(books);

    favorites.addAll(books);
    pushNotification.booksAdded(books);
  }
}
</code></pre>
<h4 id="weakening-preconditions">Weakening preconditions</h4>
<p>The amount of assumptions made before a method can be executed (and, with that, the amount of pre-conditions) is a design choice.</p>
<p>One might want to weaken the pre-conditions, so that the method accepts/is able to handle more situations.
To that aim, we can remove a pre-condition as the method itself can handle the situation where the pre-condition would be false.
This makes the method more generally applicable, but is also increases its complexity.
The method always has to check some extra things to handle the cases that could had been pre-conditions.
Finding the balance between the amount of preconditions and complexity of the method is part of designing the system.</p>
<p>We can remove some of the pre-conditions of the <code>merge</code> method by adding some if-statements to the method.
First, we can try to remove the <code>!books.isEmpty()</code> assertions.
This means that the method <code>merge</code> has to handle empty <code>books</code> lists itself.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  <span class="hljs-comment">// ...</span>

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    <span class="hljs-keyword">assert</span> books != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> favorites != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> !favorites.containsAll(books);

    <span class="hljs-keyword">if</span> (!books.isEmpty()) {
      favorites.addAll(books);
      pushNotification.booksAdded(books);
    }
  }
}
</code></pre>
<p>By generalizing the <code>merge</code> method, we have removed one of the pre-conditions.</p>
<p>We can even remove the <code>!favorites.containsAll(books)</code> assertion by adding some more functionality to the method.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  <span class="hljs-comment">// ...</span>

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    <span class="hljs-keyword">assert</span> books != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> favorites != <span class="hljs-keyword">null</span>;

    List&lt;Book&gt; newBooks = books.removeAll(favorites);

    <span class="hljs-keyword">if</span> (!newBooks.isEmpty()) {
      favorites.addAll(newBooks);
      pushNotification.booksAdded(newBooks);
    }
  }
}
</code></pre>
<p>Note that, although we increased the complexity of method by removing some of its pre-conditions and dealing with these cases in the implementation, the method now is also easier to be called by clients. After all, the method has less pre-conditions to be called.</p>
<h3 id="post-conditions">Post-conditions</h3>
<p>The pre-conditions of a method hold when the method is called. At the end of the method, its <strong>post-conditions</strong> should hold.
In other words, the post-conditions formalize the effects that a method guarantees to have when it is done with its execution.</p>
<p>The <code>merge</code> method of the previous examples does two things.
It adds the new books to the <code>favorites</code> list.
Let&apos;s turn this into a boolean expression, so we can formulate this as a post-condition.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  <span class="hljs-comment">// ...</span>

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    <span class="hljs-keyword">assert</span> books != <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">assert</span> favorites != <span class="hljs-keyword">null</span>;

    List&lt;Book&gt; newBooks = books.removeAll(favorites);

    <span class="hljs-keyword">if</span> (!newBooks.isEmpty()) {
      favorites.addAll(newBooks);
      pushNotification.booksAdded(newBooks);
    }

    <span class="hljs-keyword">assert</span> favorites.containsAll(books);
  }
}
</code></pre>
<p>The other effect of the method is the notification that is sent.
Unfortunately, we cannot easily formalize it as a post-condition.
In a test suite, we would probably mock the <code>pushNotification</code> and then use <code>Mockito.verify</code> to verify that <code>booksAdded</code> was called.</p>
<p>It is important to realise that these post-conditions only have to hold if the preconditions held when the method was called. In other words, if the method&apos;s pre-conditions were not fully satisfied, the method might not guarantee its post-conditions.</p>
<p>You also saw in the example that we could not really write assertions for
some of post-conditions of the method. 
Post-conditions (and pre-conditions for that matter) might not cover all the possible effects; however,
hopefully they do cover a relevant subset of the possible behavior.</p>
<h4 id="post-conditions-of-complex-methods">Post-conditions of complex methods</h4>
<p>For complex methods, the post-conditions also become more complex.
That&apos;s actually another reason for keeping the method simple.
If a method has multiple return statements, it is good to think if these are actually needed.
Maybe it is possible to combine them to one return statement with a general post-condition.
Otherwise, the post-condition essentially becomes a disjunction of propositions.
Each return statement forms a possible post-condition (proposition) and the method guarantees that one of these post-conditions is met.</p>
<p>We have a method body that has three conditions and three different return statements.
This also gives us three post-conditions.
The placing of these post-conditions now becomes quite important, so the whole method is becoming rather complex with the postconditions.</p>
<pre><code class="lang-java"><span class="hljs-keyword">if</span> (A) {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">if</span> (B) {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">assert</span> PC1;
    <span class="hljs-keyword">return</span> ...;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">assert</span> PC2;
    <span class="hljs-keyword">return</span> ...;
  }
}
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">assert</span> PC3;
<span class="hljs-keyword">return</span> ...;
</code></pre>
<p>Now if <code>A</code> and <code>B</code> are true, post-condition 1 should hold.
If <code>A</code> is true and <code>B</code> is false, postcondition 2 should hold.
Finally, if <code>A</code> is false, postcondition 3 should hold.</p>
<h4 id="how-weak-pre-conditions-affect-the-post-conditions">How weak pre-conditions affect the post-conditions?</h4>
<p>Based on what we saw about pre- and post-conditions, we can come up with a few
rules:</p>
<ul>
<li><p>The weaker your pre-condition, the more situations your method
is able to handle, and the less thinking your client needs to do.
However, with weak pre-conditions, the method will always have to do
the checking.</p>
</li>
<li><p>The post-conditions are only guaranteed if the pre-conditions held; if not,
the outcome can any anything. With weak pre-conditions, the method might have
to handle different situations, leading to multiple post-conditions guarded
by conditions over the inputs or the program state.</p>
</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/LCJ91VSS3Z8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>




<h2 id="invariants">Invariants</h2>
<p>We have seen that preconditions should hold before a method&apos;s execution and postconditions should hold after a method&apos;s execution.
Now we move to conditions that always have to hold, before and after a method&apos;s execution.
These conditions are called <strong>invariants</strong>.
An invariant is thus a condition that holds throughout the entire lifetime of a system, an object, or a data structure.</p>
<p>In terms of implementation, a simple way of using invariants is by creating a &quot;checker&quot; method.
This method will go through the data structure/object/system and will assert whether the invariants hold.
If an invariant does not hold, it will then throw an <code>AssertionError</code>.
For simpler invariants, it is common to see a boolean method that checks the invariants of the structure/object/system.</p>
<p>Suppose we have a binary tree datastructure.
An invariant for this data structure would be that when a parent points to a child, then the child should point to this parent.</p>
<p>We can make a method that checks if this representation is correct in the given binary tree.</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkRep</span><span class="hljs-params">(BinaryTree tree)</span> </span>{
  BinaryTree left = tree.getLeft();
  BinaryTree right = tree.getRight();

  <span class="hljs-keyword">assert</span> (left == <span class="hljs-keyword">null</span> || left.getParent() == tree) &amp;&amp;
      (right == <span class="hljs-keyword">null</span> || right.getParent() == tree)

  <span class="hljs-keyword">if</span> (left != <span class="hljs-keyword">null</span>) {
    checkRep(left);
  }
  <span class="hljs-keyword">if</span> (right != <span class="hljs-keyword">null</span>) {
    checkRep(right);
  }
}
</code></pre>
<p>In <code>checkRep()</code>, we first check if the children nodes of the current node are pointing to this node as parent.
Then, we continue by checking the child nodes the same way we checked the current node.</p>
<h3 id="class-invariants">Class invariants</h3>
<p>In Object-Oriented Programming, these checks can also be applied at the class-level.
This gives us <strong>class invariants</strong>.
A class invariant ensures that its conditions will be true throughout the entire lifetime of the object.</p>
<p>The first time a class invariant should be true is right after its construction (i.e., when the constructor method is done).
The class invariant should also hold after each public method invocation.
Moreover, methods can assume that, when they start, the class invariant holds.</p>
<p>A private method invoked by a public method can leave the object with the class invariant being false.
However, the public method that invoked the private method should then fix this and end with the class invariant again being true.</p>
<p>This is all formalized by Bertrand Meyer as: <em>&quot;The class variant indicates that a proposition P can be a class invariant if it holds after construction, and before and after any call to a public method assuming that the public methods are called with their preconditions being true.&quot;</em></p>
<p>Of course, we want to know how to implement these class invariants.
To implement simple class invariant in Java, we can use the boolean method that checks if the representation is okay.
We usually call this method <code>invariant</code>.
We then assert the return value of this method after the constructor, and before and after each public method.
In these public methods, the only pre-conditions and post-conditions that have to hold additionally are the ones that are not in the invariant.
When handling more complicated invariants, we can split the invariant into more methods.
Then we use these methods in the <code>invariant</code> method.</p>
<p>We return to the <code>FavoriteBooks</code> with the <code>merge</code> method.
We had a pre-condition saying that <code>favorites != null</code>.
Given that this should always be true, we can turn it into a class variant.
Additionally, we can add the condition that <code>pushNotification != null</code>.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FavoriteBooks</span> </span>{
  List&lt;Book&gt; favorites;
  Listener pushNotification;

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FavoriteBooks</span><span class="hljs-params">(...)</span> </span>{
    favorites = ...;
    pushNotification = ...;

    <span class="hljs-comment">// ...</span>

    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span></span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> favorites != <span class="hljs-keyword">null</span> &amp;&amp; pushNotification != <span class="hljs-keyword">null</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(List&lt;Book&gt; books)</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">// Remaining preconditions</span>
    <span class="hljs-keyword">assert</span> books != <span class="hljs-keyword">null</span>;

    List&lt;Book&gt; newBooks = books.removeAll(favorites);

    <span class="hljs-keyword">if</span> (!newBooks.isEmpty()) {
      favorites.addAll(newBooks);
      pushNotification.booksAdded(newBooks);
    }

    <span class="hljs-comment">// Remaining postconditions</span>
    <span class="hljs-keyword">assert</span> favorites.containsAll(books);

    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span></span>;
  }

}
</code></pre>
<p>Note that the <code>invariant</code> method checks the two conditions.
We call <code>invariant</code> before and after <code>merge</code> and we only assert the pre- and post-conditions that are not covered in the <code>invariant</code> method.
We also assert the result of the <code>invariant</code> method at the end of the constructor.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/T5kwU91W07s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<h2 id="design-by-contracts">Design by Contracts</h2>
<p>Suppose a client system and a server system. The client makes use of the API
of of the server. 
The client and server are bound by a contract.
The server does its job as long as its methods are used properly by the client.
This relates strongly to the pre- and post-conditions that we discussed earlier.
The client has to use the server&apos;s methods in a way that their preconditions hold.
The server then guarantees that the post-conditions will hold after the method call, i.e., makes sure the method delivers what it promises.</p>
<p>Note how the pre- and post-conditions of the server forms a contract
between the server and the client.
Designing a system following such contracts is called what
we call <strong>Design by Contracts</strong>.
In such design, contracts are represented by interfaces.
These interfaces are used by the client and implemented by the server.
The following UML diagram illustrates it:</p>
<p><img src="img/design-by-contracts/dbc_uml.svg" alt="Design by Contracts UML diagram"></p>
<h3 id="subcontracting">Subcontracting</h3>
<p>Imagine now an interface. This interface has its own pre- and post-conditions.
Now, what happens to these conditions when we create another implementation of this interface (i.e., a class that implements the interface, or a class that extends some base class)?</p>
<p>In the UML diagram above, we see that the implementation can have different pre-, post-conditions, and invariants than its base interface.</p>
<p>In terms of pre-conditions, the new implementation must be able to work with the pre-conditions that were specified in the interface.
After all, the interface is the only thing the client sees of the system.
The implementation cannot add any pre-conditions to the server&apos;s preconditions.
In terms of strength, we now know that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>P</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.751892em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> has to be <strong>weaker</strong> than (or as weak as) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span>.</p>
<p>The postcondition work the other way around.
The implementation must do at least the same work as the interface, but it is allowed to do a bit more.
Therefore, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Q&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> should be <strong>stronger</strong> than (or as strong as) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span></span></span></span>.</p>
<p>Finally, the interface guarantees that the invariant always holds.
Then, the implementation should also guarentee that at least the interface&apos;s invariant holds.
So, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>I</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">I&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.751892em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> should be <strong>stronger</strong> than (or as strong as) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span>.</p>
<p>In short, using the notation of the UML diagram:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>P</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.751892em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> <strong>weaker</strong> than <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Q&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> <strong>stronger</strong> than <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>I</mi><mrow><mi mathvariant="normal">&#x2032;</mi></mrow></msup></mrow><annotation encoding="application/x-tex">I&apos;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:0.751892em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">&#x2032;</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span> <strong>stronger</strong> than <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span></li>
</ul>
<p>The subcontract (the implementation) requires no more and ensures no less than the actual contract (the interface).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aA29jZYdJos" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<h3 id="liskov-substitution-principle">Liskov Substitution Principle</h3>
<p>The subcontracting follows the general notion of behavioral subtyping, proposed by Barbara Liskov.
The behavioral subtyping states that if we have a class <code>T</code> and this class has some sub-classes,
the clients or users of class <code>T</code> should be able to choose any of <code>T</code>&apos;s sub-classes.
This notion of behavioral subtyping is now known as the Liskov Substitution Principle (LSP).</p>
<p>In other words, the LSP states that if you use a class, you should be able to replace this class by one of its subclasses.
The sub-contracting we discussed earlier is just a formalization of this principle.
Proper class hierarchies follow the Liskov Substitution Principle.
Leep the LSP in mind when designing and implementating a software system.</p>
<p>How can we test that our classes follow the LSP?
To test the LSP, we have to make some test cases for the public methods of the super class and execute these tests with all its subclasses.
We could just create the same tests to each of the subclasses&apos; test suites.
This, however, leads to a lot of code duplication in the test code, which we would like to avoid.</p>
<p>In Java, the List interface is implemented by various sub-classes.
Two examples are the <code>ArrayList</code> and <code>LinkedList</code>.
Creating the tests for each of the sub-classes separately will result in the following structure.</p>
<p><img src="img/design-by-contracts/examples/subclass_test.svg" alt="Test classes architecture"></p>
<p>The ArrayList and LinkedList will behave the same for the methods defined in List.
Therefore, there will be duplicate tests for these methods.</p>
<p>To avoid this code duplication we can create a test suite just for the super class.
This test suite tests just the public methods of the super class.
The tests in this test suite should then be executed for each 
of the sub-classes of the super class.
This can be done by making the test classes extend the &quot;super test class&quot;.
The &quot;sub test class&quot; will have all the common tests defined in the &quot;super test class&quot; and its own specific tests.</p>
<p>This is how the test suite looks like:</p>
<p><img src="img/design-by-contracts/examples/parallel_architecture.svg" alt="Parallel Class Hierarchy"></p>
<p>Here, the <code>ArrayListTest</code> and <code>LinkedListTest</code> extend the <code>ListTest</code>.
List is an interface, so the <code>ListTest</code> should be abstract.
We cannot instantiate a <code>List</code> itself, so we should not be able to execute the <code>ListTest</code> without a test class corresponding to one of List&apos;s subclasses.
<code>ListTest</code> contains all the common tests of <code>ArrayListTest</code> and <code>LinkedListTest</code>.
<code>ArrayListTest</code> and <code>LinkedListTest</code> can contain their specific tests.</p>
<p>In the example, you can see that the hierarchy of the test classes is similar to the hierarchy of the classes they test.
Therefore, we say that we use a <strong>parallel class hierarchy</strong> in our test classes.</p>
<p>Now we have one problem.
How do we make sure that the &quot;super test class&quot; executes its tests in the correct subclass?
This depends on the test class that is executed and the subclass it is testing.
If we have class <code>T</code>, with subclasses <code>A</code> and <code>B</code>, then when executing tests for <code>A</code> we need the test class of <code>T</code> to use an instance of <code>A</code>; when executing tests for <code>B</code>, we need the test class of <code>T</code> to use an instance of <code>B</code>.</p>
<p>One way to achieve this behavior is by using the <em>Factory Method</em> design pattern,
which works as follows:
In the test class for the interface level (the &quot;super test class&quot;), we define an abstract method that returns an instance with the interface type.
By making the method abstract, we force the test classes of the concrete implementations to override it.
We return the instance of the specific subclass in the overriden method.
This instance is then used to execute the tests.</p>
<p>We want to use the Factory Method design pattern in our tests for the <code>List</code>.
We start by the interface level test class.
Here, we define the abstract method that gives us a List.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{

  <span class="hljs-keyword">private</span> List list;

  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> List <span class="hljs-title">createList</span><span class="hljs-params">()</span></span>;

  <span class="hljs-meta">@BeforeEach</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{
    list = createList();
  }

  <span class="hljs-comment">// Common List tests using list</span>
}
</code></pre>
<p>Then, for this example, we create a class to test the <code>ArrayList</code>.
We have to override the createList method and we can define any tests specific for the <code>ArrayList</code>.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayListTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ListTest</span> </span>{

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> List <span class="hljs-title">createList</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList();
  }

  <span class="hljs-comment">// Tests specific for the ArrayList</span>
}
</code></pre>
<p>Now, the <code>ArrayListTest</code> inherits all the <code>ListTest</code>&apos;s tests, so these will be executed when we execute the <code>ArrayListTest</code> test suite.
Because the <code>createList()</code> method returns an <code>ArrayList</code>, the common test classes will use an <code>ArrayList</code>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GQ5NTiigkb0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<h2 id="property-based-testing">Property-Based Testing</h2>
<p>We briefly mentioned property checks.
There, we used the properties in assertions.
We can also use the properties for test case generation instead of just assertions.</p>
<p>Given that these properties should always hold, we can test them with any input that we like.
We typically make use of a generator to try a high number of different inputs,
without the need of writing them all ourselves.</p>
<p>These generators often create a series of random input values for a test function.
The test function then checks if the property holds using an assertion.
For each of the generated input values, this assertion is checked. If we find an input value that makes the assertion to fail, we can affirm that the property does not hold.</p>
<p>The first implementation of this idea was called QuickCheck and was originally developed for Haskell.
Nowadays, most languages have an implementation of QuickCheck, including Java.
The Java implementation we are going to use is made by Paul Holser and is available on his <a href="https://github.com/pholser/junit-quickcheck" target="_blank">github</a>.
All implementations of QuickCheck follow the same idea, but we will focus on the Java implementation.</p>
<p>How does it work?</p>
<ul>
<li>First, we define properties.
Similar to defining test methods, we use an annotation on a method with an assertion to define a property: <code>@Property</code>.
QuickCheck includes a number of generators for various types.
For example, Strings, Integers, Lists, Dates, etc.</li>
<li><p>To generate values, we can simply add some parameters to the annotated method.
The arguments for these parameters will then be automatically generated by QuickCheck.
Note that the existing generators are often not enough when we want to test one
of our own classes; in these cases, we can create a custom generator which generates random values for this class.</p>
</li>
<li><p>Quickcheck handles the amount of generated inputs. After all, generating random values for the test input is tricky:
the generator might create too much data to efficiently handle while testing.</p>
</li>
<li><p>Finally, as soon as QuickCheck finds a value that breaks the property, it
starts the shrinking process.
Using random input values can result in very large inputs.
For example lists that are very long or strings with a lot of characters.
These inputs can be very hard to debug. Smaller inputs are preferrable when it comes to testing.
When an input makes the property fail, QuickCheck tries to find shrink this input while it still makes the property fail.
That way it gets the small part of the larger input that actually causes the problem.</p>
</li>
</ul>
<p>As an example:
a property of Strings is that if we add two strings together, the length of the result should be the same as the sum of the lengths of the two strings summed.
We can use property-based testing and the QuickCheck&apos;s implementation to make tests for this property.</p>
<pre><code class="lang-java"><span class="hljs-meta">@Runwith</span>(JUnitQuickcheck.class)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PropertyTest</span> </span>{

  <span class="hljs-meta">@Property</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">concatenationLength</span><span class="hljs-params">(String s1, String s2)</span> </span>{
    assertEquals(s1.length() + s2.length(), (s1 + s2).length())
  }
}
</code></pre>
<p><code>concatenationLength</code> had the <code>Property</code> anotation, so QuickCheck will generate random values for <code>s1</code> and <code>s2</code> and execute the test with those values.</p>
<p>Property-based testing changes the way we automate our tests.
Usually, we just automate the execution of the tests.
With property-based testing, by means of QuickCheck&apos;s implementation, we also automatically generate the inputs of the tests.</p>
<h3 id="property-based-testing-and-ai">Property-based testing and AI</h3>
<p>A lot of today&apos;s research goes into a AI for software testing is about generating good input values for the tests.
We try to apply artificial intelligence to find inputs that exercise an important parts of the system.</p>
<p>While the research&apos;s results are very promising, there still exist difficulties with this test approach.
The main problem is that if the AI generates random inputs, how do we know for sure that the outcome is correct, i.e., how do we know that the problem behaved correctly for that random value?
With the unit test we made so far we manually took certain inputs, thought about the correct outcome, and made the assertion to expect that outcome.
When generating random inputs, we cannot think about the outcome every time.
The pre- and postconditions, contracts, and properties we discussed in this chapter can help us solve the problem.
By well-defining the system in these terms, we can use them as oracles in the test cases.
The properties always have to be true, so we can use them in all the randomly generated test cases.</p>
<p>We will discuss more about AI techniques in a future chapter.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7kB6JaSH9p8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>







<h2 id="exercises">Exercises</h2>
<p><strong>Exercise 1.</strong>
See the code below:</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> Square <span class="hljs-title">squareAt</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>{
  <span class="hljs-keyword">assert</span> x &gt;= <span class="hljs-number">0</span>;
  <span class="hljs-keyword">assert</span> x &lt; board.getWidth();
  <span class="hljs-keyword">assert</span> y &gt;= <span class="hljs-number">0</span>;
  <span class="hljs-keyword">assert</span> y &lt; board[x].length;
  <span class="hljs-keyword">assert</span> board != <span class="hljs-keyword">null</span>;

  Square result = board[x][y];

  <span class="hljs-keyword">assert</span> result != <span class="hljs-keyword">null</span>;
  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>What assertion(s), if any, can be turned into a class invariant?</p>
<p><strong>Exercise 2.</strong>
Consider the piece of code in the previous example.
Suppose we remove the last assertion (line 10), which states that the result can never be null.</p>
<p>Are the existing preconditions of the <code>squareAt</code> method enough to ensure the property in the original line 10?
What can we add to the class (other than the just removed postcondition) to guarentee this property?</p>
<p><strong>Exercise 3.</strong>
Your colleague works on a drawing application.
He has created a Rectangle class.
For rectangles, the width and height can be different from each other, but can&apos;t be negative numbers.</p>
<p>Your colleague also defines the Square class.
Squares are a special type of rectangle: the width and height should be equal and also can&apos;t be negative.
Your colleague decides to implement this by making Square inherit from Rectangle.</p>
<p>The code for the two classes is the following.</p>
<pre><code class="lang-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> </span>{
  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> width;
  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> height;

  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> width &gt; <span class="hljs-number">0</span> &amp;&amp; height &gt; <span class="hljs-number">0</span>; }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> </span>{
    <span class="hljs-keyword">assert</span> width &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">assert</span> height &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.width = width;
    <span class="hljs-keyword">this</span>.height = height;
    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span>
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">int</span> a = width * height;
    <span class="hljs-keyword">assert</span> a &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> a;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">resetSize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> </span>{
    <span class="hljs-keyword">assert</span> width &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">assert</span> height &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.width = width;
    <span class="hljs-keyword">this</span>.height = height;
    <span class="hljs-function"><span class="hljs-keyword">assert</span> <span class="hljs-title">invariant</span><span class="hljs-params">()</span></span>;
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rectangle</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Square</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>{
    <span class="hljs-keyword">assert</span> x &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">super</span>(x, x);
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">resetSize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> </span>{
    <span class="hljs-keyword">assert</span> width == height;
    <span class="hljs-keyword">assert</span> width &gt; <span class="hljs-number">0</span>;
    <span class="hljs-keyword">super</span>.resetSize(width, height);
  }
}
</code></pre>
<p>Inspired by Bertrand Meyer&apos;s design by contracts, he also use asserts to make sure contracts are followed. He explicitly defines preconditions and postconditions in various methods of the base Rectangle class and the derived Square class.</p>
<p>A second colleague comes in and expresses concerns about the design.
How can you use the assertions provided to discuss the correctness of this design?</p>
<p>Is the second colleagues concern justified?
What principle is violated, if any?
Explain with the assertions shown in the code.</p>
<p><strong>Exercise 4.</strong>
You run your application with assertion checking enabled. 
Unfortunately, it reports an assertion failure signaling a class invariant violation in one of the libraries your application makes use of.</p>
<p>Assume that the contract of the library in question is correct, and that all relevant preconditions are encoded in assertions as well.</p>
<p>Can you fix this problem? 
If so, how? 
If not, why?</p>
<p><strong>Exercise 5.</strong>
HTTP requests return a status code which can have several values. As explained on <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank">Wikipedia</a>:</p>
<ul>
<li>A 4xx status code &quot;is intended for situations in which the error seems to have been caused by the client&quot;. 
A well known example is the 404 (Page not found) status code.</li>
<li>A 5xx status code &quot;indicates cases in which the server is aware that it has encountered an error or is otherwise incapable of performing the request.&quot;
A well known example is the 500 (Internal Server Error) status code.</li>
</ul>
<p>What is the best correspondence between these status codes and pre- and postconditions?</p>
<p><strong>Exercise 6.</strong>
A method M belongs to a class C and has a precondition P and a postcondition Q. 
Now, suppose that a developer creates a class C&apos; that extends C, and 
creates a method M&apos; that overrides M. 
Which one of the following statements correctly explains the relative
strength of the pre (P&apos;) and postconditions (Q&apos;) of the overridden method M&apos;?</p>
<ol>
<li>P&apos; should be equal or weaker than P, and Q&apos; should be equal or stronger than Q.</li>
<li>P&apos; should be equal or stronger than P, and Q&apos; should be equal or stronger than Q.</li>
<li>P&apos; should be equal or weaker than P, and Q&apos; should be equal or weaker than Q.</li>
<li>P&apos; should be equal or stronger than P, and Q&apos; should be equal or weaker than Q.</li>
</ol>
<p><strong>Exercise 7.</strong>
Which of the following is a valid reason to use assertions in your code?</p>
<ol>
<li>To verify expressions with side effects.</li>
<li>To handle exceptional cases in the program.</li>
<li>To conduct user input validation.</li>
<li>To make debugging easier.</li>
</ol>
<h2 id="references">References</h2>
<ul>
<li><p>C2 Wiki, What are assertions? <a href="http://wiki.c2.com/?WhatAreAssertions" target="_blank">http://wiki.c2.com/?WhatAreAssertions</a></p>
</li>
<li><p>Mitchell, R., McKim, J., &amp; Meyer, B. (2001). Design by contract, by example. Addison Wesley Longman Publishing Co., Inc..</p>
</li>
<li><p>Meyer, B. (2002). Design by contract. Prentice Hall.</p>
</li>
<li><p>Liskov, B. H., &amp; Wing, J. M. (1994). A behavioral notion of subtyping. ACM Transactions on Programming Languages and Systems (TOPLAS), 16(6), 1811-1841.</p>
</li>
<li><p>&quot;Polymorphic Server Test&quot; in Binder, R. V. (1994). Object-oriented software testing. Communications of the ACM, 37(9), 28-30.</p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="model-based-testing.html" class="navigation navigation-prev " aria-label="Previous page: Model-based testing">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../pragmatic-testing/" class="navigation navigation-next " aria-label="Next page: Pragmatic software testing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Design-by-contracts and property-based testing","level":"3.1.5","depth":2,"next":{"title":"Pragmatic software testing","level":"4.1","depth":1,"path":"chapters/pragmatic-testing/README.md","ref":"chapters/pragmatic-testing/README.md","articles":[{"title":"The testing pyramid","level":"4.1.1","depth":2,"path":"chapters/pragmatic-testing/testing-pyramid.md","ref":"chapters/pragmatic-testing/testing-pyramid.md","articles":[]},{"title":"Mock objects","level":"4.1.2","depth":2,"path":"chapters/pragmatic-testing/mocking.md","ref":"chapters/pragmatic-testing/mocking.md","articles":[]},{"title":"Design for testability","level":"4.1.3","depth":2,"path":"chapters/pragmatic-testing/design-for-testability.md","ref":"chapters/pragmatic-testing/design-for-testability.md","articles":[]},{"title":"Test-driven development","level":"4.1.4","depth":2,"path":"chapters/pragmatic-testing/tdd.md","ref":"chapters/pragmatic-testing/tdd.md","articles":[]},{"title":"Test code quality","level":"4.1.5","depth":2,"path":"chapters/pragmatic-testing/test-code-quality.md","ref":"chapters/pragmatic-testing/test-code-quality.md","articles":[]}]},"previous":{"title":"Model-based testing","level":"3.1.4","depth":2,"path":"chapters/testing-techniques/model-based-testing.md","ref":"chapters/testing-techniques/model-based-testing.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["hints","katex","ga"],"pluginsConfig":{"search":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":"auto","token":"UA-154019382-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapters/testing-techniques/design-by-contracts.md","mtime":"2020-03-22T11:59:34.592Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-22T14:49:57.101Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

