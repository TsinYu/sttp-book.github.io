
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Design for testability Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="tdd.html" />
    
    
    <link rel="prev" href="mocking.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../preface/authors.html">
            
                <a href="../preface/authors.html">
            
                    
                    Authors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../preface/acknowledgments.html">
            
                <a href="../preface/acknowledgments.html">
            
                    
                    Acknowledgments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../preface/adopt.html">
            
                <a href="../preface/adopt.html">
            
                    
                    Adopt this book
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../preface/contribute.html">
            
                <a href="../preface/contribute.html">
            
                    
                    Contribute to this book
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../preface/license.html">
            
                <a href="../preface/license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../preface/structure.html">
            
                <a href="../preface/structure.html">
            
                    
                    Structure of the book
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../getting-started/">
            
                <a href="../getting-started/">
            
                    
                    Getting started with software testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../getting-started/why-software-testing.html">
            
                <a href="../getting-started/why-software-testing.html">
            
                    
                    Why software testing?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../getting-started/testing-principles.html">
            
                <a href="../getting-started/testing-principles.html">
            
                    
                    Principles of software testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../getting-started/test-automation.html">
            
                <a href="../getting-started/test-automation.html">
            
                    
                    Software testing automation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../testing-techniques/">
            
                <a href="../testing-techniques/">
            
                    
                    Testing techniques
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../testing-techniques/specification-based-testing.html">
            
                <a href="../testing-techniques/specification-based-testing.html">
            
                    
                    Specification-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../testing-techniques/boundary-testing.html">
            
                <a href="../testing-techniques/boundary-testing.html">
            
                    
                    Boundary testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../testing-techniques/structural-testing.html">
            
                <a href="../testing-techniques/structural-testing.html">
            
                    
                    Structural-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../testing-techniques/model-based-testing.html">
            
                <a href="../testing-techniques/model-based-testing.html">
            
                    
                    Model-based testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="../testing-techniques/design-by-contracts.html">
            
                <a href="../testing-techniques/design-by-contracts.html">
            
                    
                    Design-by-contracts and property-based testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="./">
            
                <a href="./">
            
                    
                    Pragmatic software testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="testing-pyramid.html">
            
                <a href="testing-pyramid.html">
            
                    
                    The testing pyramid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="mocking.html">
            
                <a href="mocking.html">
            
                    
                    Mock objects
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.1.3" data-path="design-for-testability.html">
            
                <a href="design-for-testability.html">
            
                    
                    Design for testability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="tdd.html">
            
                <a href="tdd.html">
            
                    
                    Test-driven development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="test-code-quality.html">
            
                <a href="test-code-quality.html">
            
                    
                    Test code quality and engineering
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../intelligent-testing/">
            
                <a href="../intelligent-testing/">
            
                    
                    Intelligent testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../intelligent-testing/mutation-testing.html">
            
                <a href="../intelligent-testing/mutation-testing.html">
            
                    
                    Mutation testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../intelligent-testing/fuzzing.html">
            
                <a href="../intelligent-testing/fuzzing.html">
            
                    
                    Fuzzing testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" >
            
                <span>
            
                    
                    Search-based software testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../testing-into-context/">
            
                <a href="../testing-into-context/">
            
                    
                    Testing in the context
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" >
            
                <span>
            
                    
                    Web testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" >
            
                <span>
            
                    
                    Database testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" >
            
                <span>
            
                    
                    Mobile testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.4" >
            
                <span>
            
                    
                    Continuous experimentation (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.5" >
            
                <span>
            
                    
                    Embedded software testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../non-functional-testing/">
            
                <a href="../non-functional-testing/">
            
                    
                    Non-functional testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" >
            
                <span>
            
                    
                    Security testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" >
            
                <span>
            
                    
                    Performance testing (soon)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" >
            
                <span>
            
                    
                    Ethical testing (soon)
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="9.1" >
            
                <span>
            
                    
                    Appendix
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="../appendix/answers.html">
            
                <a href="../appendix/answers.html">
            
                    
                    Answers to the exercises
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.1.2" data-path="../appendix/changelog.html">
            
                <a href="../appendix/changelog.html">
            
                    
                    Change log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Design for testability</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="design-for-testability">Design for Testability</h1>
<h2 id="introduction">Introduction</h2>
<p>Now that we know how to use mocks and what we can use them for, 
it is time to take another look at how we design our software systems.</p>
<p>In the example of the Mocking chapter, it was very easy to make sure that the <code>InvoiceFilter</code> used our mock, instead of the concrete instance of the class.
This is not always the case. Note how we had to refactor the code for that happen.  <strong>We have to design our code in a way that it makes it easy to test the code!</strong></p>
<p>Testability is related to the easeness of writing automated tests to that
code.
We know that automated tests are crucial in software development; therefore, it is essential that our code is testable.</p>
<p>In this chapter, we&apos;ll discuss some design practices that increases
the testability of our software systems.</p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iVJNaG3iqrQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</center>



<h2 id="dependency-injection">Dependency Injection</h2>
<p>Dependency injection is a design choice we can use to make our code more testable.
We will illustrate what dependency injection is it by means of an analogy:</p>
<p>Say we need a hammer to perform a certain task.
When we are asked to do this task, we could go search and find the hammer.
Then, once we have the hammer, we can use it to perform the task.
However, another approach is to say that we need a hammer when someone asks us to perform the task.
This way, instead of getting the hammer ourselves, we get it from the person that wants us to do the task.</p>
<p>We can do the same when managing the dependencies in our code.
Instead of the class instantiating dependency itself, the class asks for the dependency (via constructor or a setter, for example).</p>
<p>We actually applied this idea in the Mocking chapter already. But let&apos;s revisit it:
In the Mockito example, it was easy to make the <code>InvoiveFilter</code> use the mock.
Let&apos;s assume that the <code>InvoiveFilter</code> is implemented as follows:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvoiceFilter</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">filter</span><span class="hljs-params">()</span> </span>{
    InvoiceDao dao = <span class="hljs-keyword">new</span> InvoiceDao();

    <span class="hljs-comment">// ...</span>
  }

}
</code></pre>
<p>In other words, the <code>InvoiceFilter</code> itself instantiates the <code>InvoiceDao</code>. 
In this implementation, there is no way to pass the mock to the <code>InvoiceFilter</code>. Any test code we write will necessarily use a concrete <code>InvoiceDao</code>. 
As we cannot control the way the <code>InvoiceDao</code> operates, this makes it a lot harder to write automated tests.
Our tests
will need a working database to run!</p>
<p>Instead, we can design our class in a way that it allows dependencies
to be injected. Note how we receive the dependency via constructor now:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvoiceFilter</span> </span>{

  <span class="hljs-keyword">private</span> InvoiceDao invoiceDao;

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InvoiceFilter</span><span class="hljs-params">(InvoiceDao invoiceDao)</span> </span>{
    <span class="hljs-keyword">this</span>.invoiceDao = invoiceDao;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">filter</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>Now we can instantiate the <code>InvoiceFilter</code> and pass it a <code>InvoiceDao</code> mock in the test code. This <code>InvoiceFilter</code> also enables the production code to pass a concrete <code>InvoiceDao</code> when the program is run normally (after all, we want it to access the real database in production!).</p>
<p>This simple change in the design of the class makes the creation of
automated tests easier and, therefore, increases the testability of the code.</p>
<p>The dependency injection principle improves our code in many ways:</p>
<ul>
<li>Enables us to mock the dependencies in the test code.</li>
<li>Makes all the dependencies more explicit; after all, they all need to
be injected (via constructor, for example).</li>
<li>The class becomes more extensible. As a client of the class, you can pass any dependency via the constructor. Suppose a class depends on a type <code>A</code> (and receives it via constructor). As a client, you can pass <code>A</code> or any implementation of <code>A</code>, e.g., if <code>A</code> is <code>List</code>, you can pass <code>ArrayList</code> or <code>LinkedList</code>. Your class now can work with many different implementations of <code>A</code>. (You should read more about the Open/Closed Principle).</li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/mGdsdBEWB5E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</center>




<h2 id="ports-and-adapters">Ports and Adapters</h2>
<p>The way a software system is designed influences how easy it is to test the system.
As we discussed before, the idea of designing a system in a way that it is testable is called <strong>design for testability</strong>.
It is important that a software developer knows about certain ways to design for testability in order to implement systems well.</p>
<p>In general, design for testability comes down to separating the domain and the infrastructure of the systems.
The domain is the core of the system: The business rules, its logic, its entities, etc.
This is very specific to the system that is being built.</p>
<p>A system also commonly makes use of a database, or webservices, or any other external components.
We consider them as <em>infrastructure</em>. In our software systems,
we often have classes which the role is to make a bridge between the external component and the core of our sytem.</p>
<p>To increase testability, we need to separate these two layers (core/domain and infrastructure) as much as possible.
In practice, we observe that when domain code and infrastructure code are mixed up together, the system just gets harder to test.</p>
<p>To separate the domain and the infrastructure, we can use the idea of <strong>Ports and Adapters</strong>, as named by Alistair Cockburn.
Ports &amp; Adapters is also called the <strong>Hexagonal Architecture</strong>.
Following this idea, the domain (business logic) depends on &quot;Ports&quot; rather than directly on the infrastructure.
These ports are just interfaces that define what the infrastructure is able to do.
These ports are completely separated from the implementation of the infrastructure.
The &quot;adapters&quot;, on the other hand, are very close to the infrastructure. 
These are the implementations of the ports that talk to the database or webservice etc. They know how the infrastructure works and how to communicate with it.</p>
<p>In the schema below, you can see that the ports are therefore part of the domain.</p>
<p><img src="img/design-for-testability/hexagonal_architecture.svg" alt="Hexagonal Architecture"></p>
<p>Ports and Adapters helps us a lot with the testability of our code.
After all, if our core domain depends only on ports, we can easily mock them!</p>
<p>To sum up, make sure your domain/core code does not depend on the infrastructure
directly. Create a layer that abstracts the infrastructure away! This layer can then be easily mocked.</p>
<p><em>Note:</em> The idea of separating the domain and the infrastructure is also intensively
discussed in the Domain-Driven Design book (which we recommend you to read!).</p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hv1XV87lJgA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</center>




<h2 id="design-for-testability-tips">Design for testability tips</h2>
<p>We end this chapter with a couple of practical tips that you can use to create a well designed, testable software system.</p>
<ul>
<li><p><strong>Cohesion</strong>: Cohesive classes are classes that do only one thing. Cohesive classes tend to be easier to test. If one of your classes is not cohesive, you can split the class into multiple small cohesive classes. This way you can test each separate class more easily.</p>
</li>
<li><p><strong>Coupling</strong>: Coupling represents the amount of classes that a class depends on. A highly coupled class needs a lot of other classes to work. Coupling hurts testability. Imagine having to create ten mocks, define the behavior of these ten mocks just one class. Reducing coupling is tricky and maybe one of the biggest challenges in software design. To reduce coupling, you can, for example, group some of the dependencies together and/or create bigger abstractions.</p>
</li>
<li><p><strong>Complex Conditions</strong>: When conditions are very complex (i.e., are composed of multiple boolean operations), maybe it is better split them into multiple conditions. Testing these simpler conditions is easier than testing one very complex condition.</p>
</li>
<li><p><strong>Private methods</strong>: A common question is whether to test private methods or not. The answer is usually &quot;no&quot;. In principle, we would like to test the private methods only through the public methods that use them. This means that we test if the public method behaves correctly, not the private method. If you feel like you want to test the private method in isolation (because it might be a very large important method), this might mean that the method should probably have its own separate class, which can be tested in isolation. </p>
</li>
<li><p><strong>Static metods</strong>: Static methods can hurt testability, as we cannot control the behavior of the static methods (i.e., they are hard to mock). Therefore, we avoid using static methods whenever possible.</p>
</li>
<li><p><strong>Layers</strong>: When using other&apos;s code or external dependencies, creating layers/classes that abstract away the dependency might help you in increasing testability. Do not be afraid to create these extra layers (although they do add complexity). </p>
</li>
<li><p><strong>Infrastructure</strong>: Again, make sure not to mix the infrastructure with the domain. You can use the methods we discussed above.</p>
</li>
<li><p><strong>Encapsulation</strong>: Encapsulation is about bringing the behavior of a class close to the data. Encapsulation will help you identify the problems in the code easier.</p>
</li>
</ul>
<p>Note how there is a <a href="https://www.youtube.com/watch?v=4cVZvoFGJTU" target="_blank">deep synergy between well design production code and testability</a>!</p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VaScxLhsDBQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</center>




<h2 id="exercises">Exercises</h2>
<p><strong>Exercise 1.</strong>
How can we improve the testability of the <code>OrderDeliveryBatch</code> class?</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderDeliveryBatch</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">runBatch</span><span class="hljs-params">()</span> </span>{

    OrderDao dao = <span class="hljs-keyword">new</span> OrderDao();
    DeliveryStartProcess delivery = <span class="hljs-keyword">new</span> DeliveryStartProcess();

    List&lt;Order&gt; orders = dao.paidButNotDelivered();

    <span class="hljs-keyword">for</span> (Order order : orders) {
      delivery.start(order);

      <span class="hljs-keyword">if</span> (order.isInternational()) {
        order.setDeliveryDate(<span class="hljs-string">&quot;5 days from now&quot;</span>);
      } <span class="hljs-keyword">else</span> {
        order.setDeliveryDate(<span class="hljs-string">&quot;2 days from now&quot;</span>);
      }
    }
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderDao</span> </span>{
  <span class="hljs-comment">// accesses a database</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeliveryStartProcess</span> </span>{
  <span class="hljs-comment">// communicates with a third-party webservice</span>
}
</code></pre>
<p>What techniques can we apply? What would the new implementation look like? Think about what you would need to do to test the <code>OrderDeliveryBatch</code> class.</p>
<p><strong>Exercise 2.</strong>
Consider the following requirement and implementation.</p>
<pre><code class="lang-text">A webshop gives a discount of 15% whenever it&apos;s King&apos;s Day.
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KingsDayDiscount</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">discount</span><span class="hljs-params">(<span class="hljs-keyword">double</span> value)</span> </span>{

    Calendar today = Calendar.getInstance();

    <span class="hljs-keyword">boolean</span> isKingsDay = today.get(MONTH) == Calendar.APRIL
        &amp;&amp; today.get(DAY_OF_MONTH) == <span class="hljs-number">27</span>;

    <span class="hljs-keyword">return</span> isKingsDay ? value * <span class="hljs-number">0.15</span> : <span class="hljs-number">0</span>;

  }
}
</code></pre>
<p>We want to create a unit test for this class.</p>
<p>Why does this class have bad testability?
What can we do to improve the testability?</p>
<p>I.e. what makes it very hard to test the method?</p>
<p><strong>Exercise 3.</strong>
Sarah just joined a mobile app team that has been trying to write automated tests for a while.
The team wants to write unit tests for some part of their code, but &quot;that&apos;s really hard&quot;, according to the developers.</p>
<p>After some code review, the developers themselves listed the following
problems in their codebase:</p>
<ol>
<li>May classes mix infrastructure and business rules</li>
<li>The database has large tables and no indexes</li>
<li>Use of static methods</li>
<li>Some classes have too many attributes/fields</li>
</ol>
<p>To increase the testability, the team has budget to work on two out of the four issues above.
Which items should Sarah recommend them to tackle first?</p>
<p>Note: All of the four issues should obviously be fixed.
However, try to prioritize the two most important onces: Which influence the testability the most?</p>
<p><strong>Exercise 4.</strong>
Observability and controllability are two important concepts when it comes to software testing.
The three developers below could benefit from improving either the observability or the controllability of the system/class under test.</p>
<ol>
<li>&quot;I can&apos;t really assert that the method under test worked well.&quot;</li>
<li>&quot;I need to make sure this class starts with that boolean set to false, but I simply can&apos;t do it.&quot;</li>
<li>&quot;I just instantiated the mock object, but there&apos;s simply no way to inject it in the class.&quot;</li>
</ol>
<p>For each of the problems above: is it related to observability or controllability?</p>
<h2 id="references">References</h2>
<ul>
<li><p>Cockburn, Alistair. The Hexagonal Architecture. <a href="https://wiki.c2.com/?HexagonalArchitecture" target="_blank">https://wiki.c2.com/?HexagonalArchitecture</a></p>
</li>
<li><p>Hevery, Misko. The Testability Guide. <a href="http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf" target="_blank">http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf</a></p>
</li>
<li><p>Michael Feathers. The deep synergy between well design production code and testability. <a href="https://www.youtube.com/watch?v=4cVZvoFGJTU" target="_blank">https://www.youtube.com/watch?v=4cVZvoFGJTU</a></p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="mocking.html" class="navigation navigation-prev " aria-label="Previous page: Mock objects">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="tdd.html" class="navigation navigation-next " aria-label="Next page: Test-driven development">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Design for testability","level":"5.1.3","depth":2,"next":{"title":"Test-driven development","level":"5.1.4","depth":2,"path":"chapters/pragmatic-testing/tdd.md","ref":"chapters/pragmatic-testing/tdd.md","articles":[]},"previous":{"title":"Mock objects","level":"5.1.2","depth":2,"path":"chapters/pragmatic-testing/mocking.md","ref":"chapters/pragmatic-testing/mocking.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["hints","katex","ga"],"pluginsConfig":{"search":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":"auto","token":"UA-154019382-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapters/pragmatic-testing/design-for-testability.md","mtime":"2020-03-22T11:59:34.585Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-25T09:59:04.989Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

